U1Donators = {}
U1Donators.players = {
["阿纳克洛斯"]={"污力涛涛"},
["血色十字军"]={"熵焱","迷路的小姐姐","手写从前","屠夫阿宝","可可的奶","冷裤勇士","米露果"},
["狂热之刃"]={"貌似妖怪","丨丶萨满笣苞"},
["安苏"]={"Mocktail","光铸馒头","童舞天橙","童舞天城","千里流浪","杰赫里斯","丶什锦咖喱饭","含朕龙根","国宝大喵","玛法利奥怒风"},
["泰拉尔"]={"Paradise"},
["奥蕾利亚"]={"微笑的公牛"},
["斯克提斯"]={"怯雨羞云"},
["永夜港"]={"阿布丢丢"},
["诺兹多姆"]={"水沝淼淼","月影信仰","为童稚们送奶","豆奶不太粉"},
["贫瘠之地"]={"有止境","凯撒丶昊","疾风丨什叁","忘却录音","正宗羊肉","玲珑刃","胖哥丶喵骑","空白","诗人尚喜"},
["巴尔古恩"]={"宅男泡面"},
["通灵学院"]={"炽蝎"},
["奥尔加隆"]={"镜丶伤"},
["布兰卡德"]={"乐正普鲁","聖光的恩赐","骨化风橙","彼岸的回忆","月葬小歪","安梦少年豆","胡大力喲"},
["寒冰皇冠{TW}"]={"拜因德拉莫"},
["太阳之井"]={"点丿滴"},
["熔火之心"]={"阿尔泰尔丶"},
["泰兰德"]={"Pandag","钻石星尘"},
["森金"]={"鱼香白牛"},
["奥特兰克"]={"云影的信守"},
["闪电之刃"]={"来一发脑残箭"},
["丽丽（四川）"]={"我杀了大臭","乀丶阿宝","单纯王丶"},
["迦拉克隆"]={"混乱的小白","詹姆斯张飞","一塊红布","混沌女皇","踏风起武"},
["斩魔者"]={"安洛丶黎阳","木叶蛀牙"},
["白银之手"]={"天赐丶优雅","丨炎爆术丨","小木剑闯天涯","深圳鱼帅","紫夜魔月","玮玮小土豆","青春正绽放","贰姨太","为什么这么皮","间于生死","黑白光影","樓先生","表面输出","请叫我倾慕灬","不知道我是谁","月落丶霜满天","秋雨寒风","蕾迦娜"},
["冰霜之刃"]={"幕后黑手"},
["金色平原"]={"麥麥","轻轻叶落","核桃空空"},
["永恒之井"]={"小菇靚","耶稣","淼不语"},
["熊猫酒仙"]={"Alyn","贝蒂威尔","天道众"},
["燃烧之刃"]={"圣骑小魔","Nukacola","挫骨扬咴"},
["主宰之剑"]={"落花昊骑","卡布琦诺","彪呼呼","消失的小德"},
["格瑞姆巴托"]={"逐风者之剑","烟灰灰","袭酆","六神眼药水","给我药","瑾云阳","炽美"},
["黑石尖塔"]={"古一"},
["勇士岛"]={"圣图拉"},
["洛丹伦"]={"秋水长天","苏想"},
["加兹鲁维"]={"被牛顶过","招财小呆"},
["死亡之翼"]={"开个噬血","希望皇霍普","四個核訫癔識","派哒星","圣光屏障","Shoothunter","亮爪","丹丹的忧桑","宝宝雙"},
["末日祷告祭坛"]={"天涯小术"},
["安威玛尔"]={"諾丨訫"},
["朵丹尼尔"]={"凤湖"},
["阿比迪斯"]={"文森"},
["回音山"]={"油腻嘎","北斗天狼星","绿果果","神锋無影"},
["利刃之拳"]={"jjboomfly","岳阳监狱狱霸"},
["提瑞斯法"]={"把妹之手"},
["迅捷微风"]={"Clownce","冲锋爱丽丝","神原骏河"},
["天空之墙"]={"我没獠牙"},
["凤凰之神"]={"斗篷与匕首","地狱灬","香辣小烤鸡","专精塑能","克里空","欧洲的茶叶蛋"},
["雷斧堡垒"]={"云歌丶岚岫"},
["罗宁"]={"藿香不正气","悦之守护","战神地狱火","丢雷螺母"},
["世界之树"]={"xiaopprimee"},
["伊森利恩"]={"宝叔叔","红毛狮子","唐小欣","孖丶車","馨有琳心"},
["憤怒使者{TW}"]={"舞鴉"},
["无尽之海"]={"影嘉","莫道销魂"},
["黑铁"]={"细雨晚安","樱婲暩"},
["海加尔"]={"Kurt","sera"},
["轻风之语"]={"猫妖","天神丨酒歌"},
["加基森"]={"兼职口粮"},
["国王之谷"]={"两仪陌岚","战戈弋弋"},
["山丘之王"]={"吾皇巴扎嘿"},
["冰风岗"]={"乳摇哥","斩它马的啊","经典丨杜蕾斯"},
["石爪峰"]={"夏屿落"},
["月光林地"]={"光之蕾拉","寇根"},
["伊瑟拉"]={"中原麻衣"},
["洛萨"]={"绯红一刀"},
["暗影之月"]={"杜拾遗","嗜血煞星","暗夜逐风"},
["塞拉摩"]={"泣灵"},
["血环"]={"火籽","卡卡、迦夜","不再颓废"},
["晴日峰"]={"酱油里的芥末"},
["萨尔"]={"車小树"},
["月神殿"]={"怀念雅典娜"},
["苏塔恩"]={"Akài"},
["哈卡"]={"叮当当咚咚当"},
["末日行者"]={"猫在逗我玩","系马倚白杨","冰箱爱你哟","Therichskrr","Arcobalone"},
["桑德兰"]={"就是这么烦","大吃货"},
["暗影议会"]={"潘大先生"},
["羽月"]={"年迈的战屌"},
["达斯雷玛"]={"冷风过境"},
["阿拉索"]={"帝蛙爱你哟"},
["古加尔"]={"呜呼哀哉"},
["暴风祭坛"]={"無所畏懼","萨满兄"},
["莱索恩"]={"张铁柱"},
["影之哀伤"]={"肥小贱"},
["阿斯塔洛"]={"黄金体验"},
["克尔苏加德"]={"千里招招","大雄"},
["白骨荒野"]={"不能打不能奶"},
["能源舰"]={"牛重征"},
["阿古斯"]={"猎血沸腾"},
["伊莫塔尔"]={"夜诺斯"},
["索拉丁"]={"疯隐士"},
["万色星辰"]={"第四个影子"},
["寒冰皇冠"]={"Sky"},
["翡翠梦境"]={"麒哆圈"},
["阿克蒙德"]={"花花大魔王"},
["霜之哀伤"]={"遊僧","青椒荷包蛋"},
["血牙魔王"]={"巫马野兽"},
["熵魔"]={"天使之翎","爱薇儿"},
["千针石林"]={"艺双馨"},
["亚雷戈斯"]={"小鸡的小柯基"},
["基尔罗格"]={"巴特洛夫斯基"},
["耐奥祖"]={"演员","丹妮莉丝"},
["加里索斯"]={"拉灯叔"},
["梦境之树"]={"道外吴彦祖"},
["埃德萨拉"]={"神話丶喵尐姐"},
["守护之剑"]={"狐乱羽"},
["埃苏雷格"]={"蓝焰"},
["海克泰尔"]={"好人一身皮干"},
["巫妖之王"]={"幻月如梦"},
["麦迪文"]={"特丽丝"},
["迦罗娜"]={"飘逸贝贝"},
["诺莫瑞根"]={"熊老夫子"}
}

local realms = {}
for realm, player in pairs(U1Donators.players) do
    table.insert(realms, realm)
end
table.sort(realms)
local players = {}
for _, realm in ipairs(realms) do
    for _, player in ipairs(U1Donators.players[realm]) do
        table.insert(players, player..'-'..realm)
    end
end

function U1Donators:CreateFrame()
    local f = WW:Frame("U1DonatorsFrame", UIParent, "BasicFrameTemplateWithInset"):Size(320, 500):TR(U1Frame, "TL", -10, 0):SetToplevel(1):SetFrameStrata("DIALOG")

    f.TitleText:SetText("爱不易的捐助者，谢谢你们")
    f.InsetBg:SetPoint("TOPLEFT", 4, -50)
    CoreUIMakeMovable(f)

    local scroll = CoreUICreateHybridStep1(nil, f(), nil, true, true, nil)
    WW(scroll):TL(f.InsetBg, 3, -3):BR(f.InsetBg, -2-21, 2):un() --:TL(3, -20)
    f.scroll = scroll

    local headn = TplColumnButton(f, nil, 22):SetWidth(108):SetText("玩家主角色"):SetScript("OnClick", noop):un()
    WW(headn:GetFontString()):SetFontHeight(14):un()
    local heads = TplColumnButton(f, nil, 22):SetWidth(80):SetText("服务器"):SetScript("OnClick", noop):un()
    WW(heads:GetFontString()):SetFontHeight(14):un()
    local headd = TplColumnButton(f, nil, 22):SetWidth(100):SetText("捐助时间"):SetScript("OnClick", noop):un()
    WW(headd:GetFontString()):SetFontHeight(14):un()
    CoreUIAnchor(f, "TOPLEFT", "TOPLEFT", 8, -30, "LEFT", "RIGHT", 0, 0, headn, heads, headd)

    local function fix_text_width(obj)
      obj:GetFontString():SetAllPoints()
    end

    scroll.creator = function(self, index, name)
      local row = WW(self.scrollChild):Button(name):LEFT():RIGHT():Size(0, 20)
      row:SetHighlightTexture([[Interface\QuestFrame\UI-QuestTitleHighlight]], 'ADD')

      row.name = row:Button():Size(100, 20):EnableMouse(false):SetButtonFont(U1FCenterTextMid):SetText(111):GetButtonText():SetJustifyH("Center"):up()
      row.server = row:Button():Size(75, 20):EnableMouse(false):SetButtonFont(U1FCenterTextTiny):SetText(111):GetButtonText():SetJustifyH("Right"):up()
      row.firstdate = row:Button():Size(90, 20):EnableMouse(false):SetButtonFont(U1FCenterTextTiny):SetText(333):GetButtonText():SetJustifyH("Right"):up()

      fix_text_width(row.name)
      fix_text_width(row.server)
      fix_text_width(row.firstdate)

      CoreUIAnchor(row, "LEFT", "LEFT", 5, 0, "LEFT", "RIGHT", 5, 0, row.name, row.server, row.firstdate)
      return row:un()
    end

    scroll.getNumFunc = function()
      return #players
    end

    scroll.updateFunc = function(self, row, index)
      row.index = index
      local name, realm = strsplit('-', players[index])
      row.name:SetText(name)
      row.server:SetText(realm)
      row.firstdate:SetText('2018年07月31日')
      --row.name:GetFontString():SetTextColor(1,1,1)
      --local date_fmt = '%Y/%m/%d'
      --local txt = date(date_fmt, time())
      --row.firstdate:SetText(txt)
    end

    CoreUICreateHybridStep2(scroll, 0, 0, "TOPLEFT", "TOPLEFT", 0)

    f:Hide();
    return f()
end


